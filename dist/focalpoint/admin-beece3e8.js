/*!
 * 
 * ResponsivePics
 * 
 * @author Clarify
 * @version 1.9.3
 * @link https://responsive.pics
 * @license UNLICENSED
 * 
 * Copyright (c) 2025 Clarify
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioresponsivePicsfocalpointJsonp=window.wpackioresponsivePicsfocalpointJsonp||[]).push([[0],[function(i,t,e){e(1),e(3),i.exports=e(2)},function(i,t,e){{const i="responsivePicsdist".replace(/[^a-zA-Z0-9_-]/g,"");e.p=window["__wpackIo"+i]}},function(i,t,e){"use strict";e.r(t)},function(i,t,e){"use strict";e.r(t);const o={init:i=>{o.view=i,o.position=i.model.get("focalPoint"),o.wrapper=i.$el.find(".image-focal__wrapper"),o.point=i.$el.find(".image-focal__point"),o.picker=i.$el.find(".image-focal__clickarea"),o.image=o.wrapper.find("img"),o.setEventListeners(),o.positionFocalPoint(o.position)},setEventListeners:()=>{jQuery(window).on("resize",o.updateInterface),o.image.on("load",i=>{o.updateInterface()}),o.picker.on("click",o.setFocalPoint),"function"==typeof jQuery.ui.draggable&&o.point.draggable({cursor:"move",start:o.startDrag,drag:o.dragging,stop:o.stopDrag,containment:o.wrapper})},updateInterface:()=>{o.wrapper.css({width:o.image.width()+"px"})},positionFocalPoint:i=>{o.view.model.set("focalPoint",i),o.point.css({left:(null==i?void 0:i.x)+"%",top:(null==i?void 0:i.y)+"%",position:"absolute"})},setFocalPoint:i=>{const t=i.offsetY-o.point.height()/2,e=i.offsetX-o.point.width()/2;o.position.x=Math.round(e/o.picker.width()*100),o.position.y=Math.round(t/o.picker.height()*100),o.positionFocalPoint(o.position),o.saveFocalPoint(o.view.model)},saveFocalPoint:i=>{var t,e,n;let a;a&&a.abort(),a=jQuery.ajax({url:null===(t=wp)||void 0===t||null===(e=t.ajax)||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.url,method:"POST",data:{action:"save_focal_point",attachment:null==i?void 0:i.attributes},beforeSend:()=>{o.view.updateSave("waiting")}}).done(i=>{o.view.update()}).fail((i,t)=>{console.error("ResponsivePics error while saving focal point",i.statusText)}).always(()=>{o.view.updateSave("ready"),a=null})},startDrag:i=>{jQuery("body").addClass("focal-point-dragging")},dragging:i=>{o.position.x=Math.round(i.target.offsetLeft/o.picker.width()*100),o.position.y=Math.round(i.target.offsetTop/o.picker.height()*100)},stopDrag:i=>{jQuery("body").removeClass("focal-point-dragging"),o.positionFocalPoint(o.position),o.saveFocalPoint(o.view.model)}};var n=o;jQuery(document).ready(()=>{var i,t,e,o,a,l,s,d,p,c,r,u;const h=i=>{var t,e;const o=null===(t=wp)||void 0===t||null===(e=t.media)||void 0===e?void 0:e.template("attachment-details-focal-point"),n=i.find(".thumbnail"),a=n.find("img");if(o&&n.length&&a.length){n.prepend(o);const i=n.find(".image-focal__wrapper");a.prependTo(i)}},v=null===(i=wp)||void 0===i||null===(t=i.media)||void 0===t||null===(e=t.view)||void 0===e?void 0:e.Attachment,g=null===(o=wp)||void 0===o||null===(a=o.media)||void 0===a||null===(l=a.view)||void 0===l||null===(s=l.Attachment)||void 0===s?void 0:s.Details,f=null===(d=wp)||void 0===d||null===(p=d.media)||void 0===p||null===(c=p.view)||void 0===c||null===(r=c.Attachment)||void 0===r||null===(u=r.Details)||void 0===u?void 0:u.TwoColumn;f&&(wp.media.view.Attachment.Details.TwoColumn=f.extend({initialize:function(){this.model.on("change:focalPoint",this.change,this)},render:function(){v.prototype.render.apply(this,arguments);const i=this.model.get("type");"image"===i&&(h(this.$el),n.init(this))},change:function(){const i=this.model.get("type"),t=this.model.get("focalPoint");"image"===i&&n.positionFocalPoint(t)},update:function(){this.views.detach(),this.model.fetch(),this.views.render()}})),g&&(wp.media.view.Attachment.Details=g.extend({initialize:function(){v.prototype.initialize.apply(this,arguments),this.model.on("change:focalPoint",this.change,this)},render:function(){v.prototype.render.apply(this,arguments),this.model.get("id");const i=this.model.get("type");"image"===i&&(h(this.$el),n.init(this))},change:function(){const i=this.model.get("type"),t=this.model.get("focalPoint");"image"===i&&n.positionFocalPoint(t)},update:function(){this.views.detach(),this.model.fetch(),this.views.render()}}))})}],[[0,1]]]);
//# sourceMappingURL=admin-beece3e8.js.map